!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=1)}([function(t,e,s){},function(t,e,s){"use strict";s.r(e);class i{constructor(t,e,s){this.matrix=t,this.body=[],this.x=e,this.y=s,this.body.push([this.x,this.y]),this.direction="right",this.speed=100,this.interval=!1,this.isClosed=!1}show(){for(let t=0;t<this.body.length;t++)this.matrix.setCell(this.body[t][0],this.body[t][1],"snake")}hide(){}changeMove(){const t=this;t&&clearInterval(t.interval),t.interval=setInterval(function(){t.move(t.direction)},t.speed)}move(t){this.matrix._calcNum(this.x,this.y);switch(this.matrix.clearCell(this.x,this.y),t){case"left":this.x--,this.x<0&&(this.x=39);break;case"right":this.x++,40==this.x&&(this.x=0);break;case"up":this.y--,this.y<0&&(this.y=39);break;case"down":this.y++,40==this.y&&(this.y=0)}this.closer(),this.body.push([this.x,this.y]);const[e,s]=this.body.shift();this.matrix.setCell(e,s,"empty"),this.eat(),this.show()}newFruit(){let t=parseInt(39*Math.random()),e=parseInt(39*Math.random());"snake"!=this.matrix.getCell(t,e).content&&this.matrix.setCell(t,e,"fruit")}closer(){"snake"==this.matrix.getCell(this.x,this.y).content&&(this.isClosed=!0)}eat(){"fruit"==this.matrix.getCell(this.x,this.y).content&&(console.log("om-nom-nom"),this.body.push([this.x,this.y]),this.speed-=1,this.matrix.setCell(this.x,this.y,"snake"),this.newFruit()),this.changeMove()}}class n{constructor(t,e,s,i){this.x=t,this.y=e,this.m=s,this.n=s,this.content="empty"}render(t){switch(this.content){case"empty":t.fillStyle="#fff",t.strokeStyle="#d2d2d2",t.fillRect(this.x,this.y,this.m,this.n),t.strokeRect(this.x,this.y,this.m,this.n);break;case"snake":t.fillStyle="green",t.fillRect(this.x,this.y,this.m,this.n),t.strokeStyle="#d2d2d2",t.strokeRect(this.x,this.y,this.m,this.n);break;case"fruit":t.fillStyle="red",t.fillRect(this.x,this.y,this.m,this.n)}}}class r{constructor(t){this.ctx=t.getContext("2d"),this.cells=[],this.cellSize=20,this.create()}create(){for(let t=0;t<800;t+=20)for(let e=0;e<800;e+=20)this.cells.push(new n(e,t,this.cellSize,this.cellSize))}render(){for(let t=0;t<this.cells.length;t++)this.cells[t].render(this.ctx)}getCell(t,e){let s=this._calcNum(t,e);return this.cells[s]}clearCell(t,e){let s=this._calcNum(t,e);this.cells[s].content="empty"}setCell(t,e,s){let i=this._calcNum(t,e);this.cells[i].content=s,this.cells[i].render(this.ctx)}_calcNum(t,e){return 40*e+t}select(t,e){this.setCell(t,e,"snake"),this.cells[this._calcNum(t,e)].render(this.ctx)}}class h{constructor(){const t=this;this.$canvas=document.querySelector(".game"),this.$newButton=document.querySelector(".new-game"),this.$record=document.querySelector(".record"),this.$score=document.querySelector(".score"),this.score=0,this.lifes=3,this.matrix=new r(this.$canvas),console.log("crate game"),this.matrix.render(),this.snake=new i(this.matrix,0,5),this.isRunning=!1,this.$newButton.addEventListener("click",this.newGame.bind(this)),this.gameInterval=setInterval(function(){t.snake.isClosed&&t.isRunning&&t.gameOver(),t.$score.textContent=t.snake.body.length-1},10),this.KeyboardHandler()}gameOver(){clearInterval(this.snake.interval),this.isRunning=!1,alert("GAME OVER"),this.$newButton.classList.remove("hide")}newGame(){this.isRunning=!0,this.matrix=new r(this.$canvas),this.snake=new i(this.matrix,0,5),this.snake.newFruit(),this.$newButton.classList.add("hide"),console.log("new gamselecte"),this.matrix.render()}_crash(){}KeyboardHandler(){const t=this;window.addEventListener("keydown",function(e){if(t.isRunning)switch(e.key){case"ArrowLeft":if("right"==t.snake.direction)break;t.snake.direction="left",t.snake.changeMove();break;case"ArrowRight":if("left"==t.snake.direction)break;t.snake.direction="right",t.snake.changeMove();break;case"ArrowUp":if("down"==t.snake.direction)break;t.snake.direction="up",t.snake.changeMove();break;case"ArrowDown":if("up"==t.snake.direction)break;t.snake.direction="down",t.snake.changeMove()}})}}s(0);new class{constructor(){this.$app=document.querySelector(".app"),this.$record=document.querySelector(".score"),this.game=new h}}}]);